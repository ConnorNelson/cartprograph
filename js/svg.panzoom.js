/*! @svgdotjs/svg.panzoom.js v2.1.0 MIT*/;
!function(S){"use strict";function A(t){return t.touches||[{clientX:t.clientX,clientY:t.clientY}]}S.extend(S.Svg,{panZoom:function(t){var n,o,e,i,a,h,s,c,l,r=this;if(this.off(".panZoom"),!1===t)return this;function u(t){if(y){var n=y.top,o=y.left,e=y.bottom,i=y.right,a=r.width()/t.width,h=r.attr(["width","height"]),s=h.width,c=h.height,l=s-o/a,u=(i-s)/a,m=c-n/a,p=(e-c)/a;return t.x=Math.min(l,Math.max(u,t.x)),t.y=Math.min(m,Math.max(p,t.y)),t}}function m(t){(f=A(t)).length<2?M&&X&&D.call(this,t):(M&&X&&E.call(this,t),t.preventDefault(),this.dispatch("pinchZoomStart",{event:t}).defaultPrevented||(this.off("touchstart.panZoom",m),b=!0,S.on(document,"touchmove.panZoom",z,this,{passive:!1}),S.on(document,"touchend.panZoom",g,this,{passive:!1})))}var p,f,v=null!=(n=(t=null!=t?t:{}).zoomFactor)?n:2,d=null!=(o=t.zoomMin)?o:Number.MIN_VALUE,x=null!=(e=t.zoomMax)?e:Number.MAX_VALUE,w=null==(i=t.wheelZoom)||i,Z=null==(a=t.pinchZoom)||a,M=null==(h=t.panning)||h,Y=null!=(s=t.panButton)?s:0,X=null!=(c=t.oneFingerPan)&&c,y=null!=(l=t.margins)&&l,b=!1,g=function t(n){n.preventDefault();var o=A(n);1<o.length||(b=!1,this.dispatch("pinchZoomEnd",{event:n}),S.off(document,"touchmove.panZoom",z),S.off(document,"touchend.panZoom",t),this.on("touchstart.panZoom",m),o.length&&M&&X&&D.call(this,n))},z=function(t){t.preventDefault();var n=A(t),o=this.zoom(),e=Math.sqrt(Math.pow(f[0].clientX-f[1].clientX,2)+Math.pow(f[0].clientY-f[1].clientY,2))/Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2));(o<d&&1<e||x<o&&e<1)&&(e=1);var i={x:n[0].clientX+.5*(n[1].clientX-n[0].clientX),y:n[0].clientY+.5*(n[1].clientY-n[0].clientY)},a=f[0].clientX+.5*(f[1].clientX-f[0].clientX),h=f[0].clientY+.5*(f[1].clientY-f[0].clientY),s=this.point(i.x,i.y),c=this.point(2*i.x-a,2*i.y-h),l=new S.Box(this.viewbox()).transform((new S.Matrix).translate(-c.x,-c.y).scale(e,0,0).translate(s.x,s.y));u(l),this.viewbox(l),f=n,this.dispatch("zoom",{box:l,focus:c})},D=function t(n){-1<n.type.indexOf("mouse")&&n.button!==Y&&n.which!==Y+1||(n.preventDefault(),this.off("mousedown.panZoom",t),f=A(n),b||(this.dispatch("panStart",{event:n}),p={x:f[0].clientX,y:f[0].clientY},S.on(document,"touchmove.panZoom mousemove.panZoom",P,this,{passive:!1}),S.on(document,"touchend.panZoom mouseup.panZoom",E,this,{passive:!1})))},E=function t(n){n.preventDefault(),S.off(document,"touchmove.panZoom mousemove.panZoom",P),S.off(document,"touchend.panZoom mouseup.panZoom",t),this.on("mousedown.panZoom",D),this.dispatch("panEnd",{event:n})},P=function(t){t.preventDefault();var n=A(t),o={x:n[0].clientX,y:n[0].clientY},e=this.point(o.x,o.y),i=this.point(p.x,p.y),a=[i.x-e.x,i.y-e.y];if(a[0]||a[1]){var h=new S.Box(this.viewbox()).transform((new S.Matrix).translate(a[0],a[1]));p=o,u(h),this.dispatch("panning",{box:h,event:t}).defaultPrevented||this.viewbox(h)}};return w&&this.on("wheel.panZoom",function(t){if(t.preventDefault(),0!==t.deltaY){var n=Math.pow(1+v,-1*t.deltaY/100)*this.zoom(),o=this.point(t.clientX,t.clientY);if(x<n&&(n=x),n<d&&(n=d),this.dispatch("zoom",{level:n,focus:o}).defaultPrevented)return this;if(this.zoom(n,o),y){var e=u(this.viewbox());this.viewbox(e)}}},this,{passive:!1}),Z&&this.on("touchstart.panZoom",m,this,{passive:!1}),M&&this.on("mousedown.panZoom",D,this,{passive:!1}),this}})}(SVG);
//# sourceMappingURL=svg.panzoom.min.js.map
